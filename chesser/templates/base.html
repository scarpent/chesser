{% load static %}
<!doctype html>
<html lang="en" data-demo="{% if IS_DEMO %}1{% else %}0{% endif %}">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>
      {% block title %}Chesser{% endblock %}{% if IS_DEMO %} (Demo){% endif %}
    </title>

    {% if debug %}
    <link rel="icon" href="{% static 'icons/favicon-dev.ico' %}" type="image/x-icon" />
    {% else %}
    <link rel="icon" href="{% static 'icons/favicon.ico' %}" type="image/x-icon" />
    {% endif %}

    <!-- Core styles (should load before any JS runs) -->
    <link href="{% static 'css/chesser.css' %}" rel="stylesheet" />
    <!-- Global helpers (must load before page JS) -->
    <script src="{% static 'js/csrf.js' %}"></script>
    <script src="{% static 'js/chesser-util.js' %}"></script>
    <!-- Global page behavior (safe to defer) -->
    <script defer src="{% static 'js/loading.js' %}"></script>

    {% block head_extra %}{% endblock %}

    <link rel="manifest" href="{% static 'manifest.json' %}" />
    <meta name="theme-color" content="#000000" />
  </head>
  <body {% block body_attrs %}{% endblock %}>
    <!-- prettier-ignore -->
    {% include "includes/loading_overlay.html" %}
    {% include "includes/landscape_overlay.html" %}
    {% include "includes/service_worker_register.html" %}

    {{ TOOLTIPS|json_script:"tooltips" }}
    <script>
      window.TOOLTIPS = window.readJsonScript("tooltips");
    </script>

    {% block content %}{% endblock %}

    <script defer src="{% static 'alpine/cdn.min.js' %}"></script>
    {% block body_extra %}{% endblock %}
  </body>
</html>
